<?xml version="1.0" encoding="utf-8"?>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-05-02 Sat 19:14 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Project Log</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Alexander Arvidsson" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="./style.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Project Log</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgef9f62a">Introduction</a></li>
<li><a href="#org563ada3">Week 13</a>
<ul>
<li><a href="#org889292c">Decisions</a></li>
</ul>
</li>
<li><a href="#org210ef03">Week 12</a>
<ul>
<li><a href="#orgafc74ff">Decisions</a></li>
<li><a href="#orgeafe1ce">Writing</a></li>
<li><a href="#org44cc5fc">Development</a>
<ul>
<li><a href="#orgfd260d0">City generation</a></li>
<li><a href="#org466ba9f">Buildings</a></li>
<li><a href="#org9049026">Export</a></li>
<li><a href="#org777e42f">GUI changes</a></li>
</ul>
</li>
<li><a href="#orgc4fe4aa">Problems and solutions</a>
<ul>
<li><a href="#orge5e9a65">City placement</a></li>
<li><a href="#orgec28ce9">Performance</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org1b20c35">Week 11</a>
<ul>
<li><a href="#org51ff91d">Decisions</a></li>
<li><a href="#org37ddd60">Writing</a></li>
<li><a href="#org4e5769f">Development</a>
<ul>
<li><a href="#org297bd02">Buildings</a></li>
<li><a href="#org6e4371e">GUI</a></li>
<li><a href="#orgf31f455">Road and park path mesh</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9765eba">Week 10</a>
<ul>
<li><a href="#orgca01a72">Decisions</a></li>
<li><a href="#org6639537">Writing</a></li>
<li><a href="#orgfc60caa">Development</a>
<ul>
<li><a href="#org19df410">Plot</a></li>
<li><a href="#orga4de828">Buildings</a></li>
<li><a href="#orge9e8625">Roads</a></li>
<li><a href="#org6fb0c5c">Road mesh</a></li>
<li><a href="#org598eea6">Building generator</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org14dc104">Week 9</a></li>
<li><a href="#orgb01ce3c">Week 8</a>
<ul>
<li><a href="#orge38b0ed">Decisions</a></li>
<li><a href="#org7ec33d7">Development</a>
<ul>
<li><a href="#org0b646fb">Roads</a></li>
<li><a href="#org6ab507e">Road mesh</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga32898e">Week 7</a>
<ul>
<li><a href="#org4a4276c">Decisions</a></li>
<li><a href="#orgd9fb453">Development</a>
<ul>
<li><a href="#orgeb54043">Terrain</a></li>
<li><a href="#org6642907">Roads</a></li>
<li><a href="#org2c196a5">Blocks</a></li>
<li><a href="#org4c35b4c">Parks</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org654626b">Week 6</a>
<ul>
<li><a href="#orgbbfd101">Development</a>
<ul>
<li><a href="#org66ad861">CI &amp; Linters</a></li>
<li><a href="#orgf3308ca">Terrain</a></li>
<li><a href="#org429f941">Road generation</a></li>
<li><a href="#org2e56f61">Parks</a></li>
<li><a href="#org92d25ad">Plot generation</a></li>
</ul>
</li>
<li><a href="#orgdb0ca7c">Problems and concerns</a></li>
</ul>
</li>
<li><a href="#org45581e5">Week 5</a>
<ul>
<li><a href="#orgc159620">Decisions</a></li>
<li><a href="#org34aa943">Development</a>
<ul>
<li><a href="#org799b02a">Roads</a></li>
<li><a href="#orgbf1c168">Road mesh and Splines</a></li>
<li><a href="#org28d0d47">Terrain</a></li>
<li><a href="#org780525e">Parks</a></li>
</ul>
</li>
<li><a href="#org3a4f5e4">Problems</a>
<ul>
<li><a href="#org921c634">Export</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4dd44a9">Week 4</a>
<ul>
<li><a href="#orgeec2bf6">Decisions</a></li>
<li><a href="#org0b6fbfc">Meeting, writing and assignments</a></li>
<li><a href="#org89b17ae">Discussion and decisions</a></li>
</ul>
</li>
<li><a href="#org2798c74">Week 3</a>
<ul>
<li><a href="#org564b768">Decisions</a></li>
<li><a href="#org1397f76">Tools</a></li>
<li><a href="#org254fea9">Report, Project plan and Terminology</a></li>
<li><a href="#org6d836ac">Development</a></li>
<li><a href="#org76bbb9c">Overall</a></li>
</ul>
</li>
<li><a href="#org56d70aa">Week 2</a>
<ul>
<li><a href="#org91ea870">Decisions</a></li>
<li><a href="#org2b85219">Discussion and planning</a></li>
</ul>
</li>
<li><a href="#org78bacc5">Week 1</a>
<ul>
<li><a href="#org4dea43a">Decisions</a></li>
<li><a href="#org2141bc7">Meetings and research.</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgef9f62a" class="outline-2">
<h2 id="orgef9f62a">Introduction</h2>
<div class="outline-text-2" id="text-orgef9f62a">
<p>
This page will consist of the collaborative log from each group member and
eventual problems and challenges that the group encounters during the
development process of the project.
</p>

<p>
Usually, the group will write their own individual efforts at the end of the
week and everything will be then compose into one shared log which will be
written here.
</p>
</div>
</div>

<div id="outline-container-org563ada3" class="outline-2">
<h2 id="org563ada3">Week 13</h2>
<div class="outline-text-2" id="text-org563ada3">
<div class="notice-warning notice">
<p>
This section is a work in progress
</p>

</div>
</div>

<div id="outline-container-org889292c" class="outline-3">
<h3 id="org889292c">Decisions</h3>
<div class="outline-text-3" id="text-org889292c">
<div class="decisions">
<ul class="org-ul">
<li>This iteration lasts until the day before the final report should be turned
in (2 weeks), therefore the focus will be on writing.</li>
<li>The group members will focus on the subjects in the report in Methods and
Results according to the following:
<ul class="org-ul">
<li>Problems (Jacob)</li>
<li>Tools (Anton)</li>
<li>Process and Workflow (Idk)</li>
<li>Application (Jacob)</li>
<li>Terrain (Marcus)</li>
<li>Population (Marcus)</li>
<li>Road (Alexander + Anton)</li>
<li>Street (Alex)</li>
<li>Block (Jacob)</li>
<li>Plot (Theodor)</li>
<li>Building (Theodor)</li>
<li>Park (Viktor)</li>
<li>Parking (Viktor)</li>
</ul></li>
<li>Excess time goes to writing discussions chapter</li>
</ul>

</div>
</div>
</div>
</div>

<div id="outline-container-org210ef03" class="outline-2">
<h2 id="org210ef03">Week 12</h2>
<div class="outline-text-2" id="text-org210ef03">
<div class="notice-warning notice">
<p>
This section is a work in progress
</p>

</div>

<p>
As usual, this week had the regular meetings with the group and the supervisor,
where we asked a few questions that we had, such as how obligatory attendance
works now during home-studies because of the Coronavirus.
</p>
</div>

<div id="outline-container-orgafc74ff" class="outline-3">
<h3 id="orgafc74ff">Decisions</h3>
<div class="outline-text-3" id="text-orgafc74ff">
<div class="decisions">
<ul class="org-ul">
<li>Group summaries are now written directly into the project log document, rather
than in the Google Sheet first.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-orgeafe1ce" class="outline-3">
<h3 id="orgeafe1ce">Writing</h3>
<div class="outline-text-3" id="text-orgeafe1ce">
<p>
Jacob has continued his report writing and spent almost the entire week writing
on the final report. Some chapters have gotten a good start already, such as the
theory, introduction and the background chapter. So far, 12 pages has been
written.
Our goal is that everyone gets started writing on the final report next week.
</p>
</div>
</div>

<div id="outline-container-org44cc5fc" class="outline-3">
<h3 id="org44cc5fc">Development</h3>
<div class="outline-text-3" id="text-org44cc5fc">
<p>
At this point, most of our generators were implemented into the full pipeline
resulting in a pretty good looking city. We spent a lot of time tuning
parameters to improve the overall look of the city and analysed the results to
find bugs and inconsistencies.
</p>
</div>

<div id="outline-container-orgfd260d0" class="outline-4">
<h4 id="orgfd260d0">City generation</h4>
<div class="outline-text-4" id="text-orgfd260d0">
<p>
The block, plot and building generation
now makes use of a population density map which previously were only used for
highways to &ldquo;guide&rdquo; the roads into other cities or high-density areas.
</p>

<p>
Amplifiers were also introduced to the population map, which basically lets us
modify the noise output. For example, when cities are placed, the population map
will get a circular amplifier in the middle of the city, which will increase the
population density closer to the center of the city.
</p>

<p>
City generation starting points and size were previously hard-coded into the
code, but now there is a feature to select points in the world while generating.
This means we can now control where cities are generated which means we can
place them in positions that might not be suitable for cities, to see what it
results in.
</p>

<p>
Roads now have dedicated sidewalks and they are also correctly projected onto
the terrain rather than clipping through it.
</p>
</div>
</div>

<div id="outline-container-org466ba9f" class="outline-4">
<h4 id="org466ba9f">Buildings</h4>
<div class="outline-text-4" id="text-org466ba9f">
<p>
Theodor has come a long way with new building generator which aims to replace
the white blocks we got in our old generator. By using an L-system for
generating the walls, we can get an incredible amount of flexibility in the
aesthetics of the buildings. We can set up rules depending on the floor, the
size, basically anything to generate different walls.
Currently, there are only some different types of wall segments but this can be
extended whenever.
</p>

<div class="w-responsive">

<div class="figure">
<p><img src="./images/week12/building_gen.png" alt="building_gen.png" />
</p>
<p><span class="figure-number">Figure 1: </span>Theodor&rsquo;s building generator</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org9049026" class="outline-4">
<h4 id="org9049026">Export</h4>
<div class="outline-text-4" id="text-org9049026">
<p>
Something that Jacob got working several weeks ago was finally put to the test,
the export function. We generated a complete city and exported it and the
results were quite nice. Textures are working fine and we now know for sure that
the export functionality will work fine with the whole city generated.
</p>

<div class="w-responsive">

<div class="figure">
<p><img src="./images/week12/blender_export.png" alt="blender_export.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Exported mesh rendered in Blender</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org777e42f" class="outline-4">
<h4 id="org777e42f">GUI changes</h4>
<div class="outline-text-4" id="text-org777e42f">
<p>
The GUI got a few updates to improve user experience. Now, the user cannot
proceed to the next state before the current state has generated something, and
the GUI is also disabled while the generator is running, if the generator is an
asynchronous one.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc4fe4aa" class="outline-3">
<h3 id="orgc4fe4aa">Problems and solutions</h3>
<div class="outline-text-3" id="text-orgc4fe4aa">
</div>
<div id="outline-container-orge5e9a65" class="outline-4">
<h4 id="orge5e9a65">City placement</h4>
<div class="outline-text-4" id="text-orge5e9a65">
<p>
One problem that was discovered was that placing cities in water would create
isolated road nodes that had no connections, this was quickly fixed by letting
agents who start in water wander for a few steps before terminating, and if they
encounter land they start their &ldquo;real&rdquo; road generation.
</p>

<p>
Also, isolated cities did not get their mesh created because the mesh generator
initiates from a single node and traverses through the network, which means some
networks that are isolated would not be reached.
</p>
</div>
</div>

<div id="outline-container-orgec28ce9" class="outline-4">
<h4 id="orgec28ce9">Performance</h4>
<div class="outline-text-4" id="text-orgec28ce9">
<p>
We quickly noticed performance issues when the city had been fully
generated. In an attempt to fix this, some of us were profiling and analysing
our code to see potential performance hickups.
</p>

<p>
We found that some of our code intended for debugging still did work even though
we had turned off debugging. Most generators has for loops to visualize what it
generates, in the form of lines. To draw these lines, we used for loops with a
debug check, but the check was performed inside the loop rather than
encapsulating the entire loop.
Simply moving the debug check to the for loop gave us significant performance
boosts.
</p>

<p>
However, there are still lots of performance issues when the city is finished
generating, and this is due to the amount of triangles rendered in the scene.
But we have seen Unity projects render far more than what we have, with much
better performance, so we need to dig deeper into the engine and find out what
optimizations exists that we are not making use of.
One thought that comes to mind is the fact that our content is dynamic, and
thus, occlusion culling would not work since that requires the developer to
pre-bake occlusion data.
</p>

<p>
Alexander spent some time researching these optimizations and found that one
solution might be to merge meshes together. Having one mesh for all buildings
and roads, or at least separated into chunks, might give a significant boost,
but no actual implementation and testing has been done as of yet.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org1b20c35" class="outline-2">
<h2 id="org1b20c35">Week 11</h2>
<div class="outline-text-2" id="text-org1b20c35">
<div class="notice-warning notice">
<p>
This section is a work in progress
</p>

</div>

<p>
During the meeting with the supervisor, we asked regarding our current project
log, which was just a Google Sheet which included our own individual efforts as
well as a summary of the progress of the week. We heard from another group that
they had a very dedicated project log that they received praise from the
examinator for, which is why we wanted to ask if we should do the same.
We shared the other group&rsquo;s project log with our supervisor and he said it was
much better than what we had, so we decided to do something similar.
</p>

<p>
This is the project log that we decided to write, and all weeks prior to this is
simply rewritten from our short summary of that week, a combination of our
individual efforts, as well as from memory.
</p>
</div>

<div id="outline-container-org51ff91d" class="outline-3">
<h3 id="org51ff91d">Decisions</h3>
<div class="outline-text-3" id="text-org51ff91d">
<div class="decisions">
<ul class="org-ul">
<li>A more dedicated project log for the progress of each week should be written.
Alexander is assigned to doing this task.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org37ddd60" class="outline-3">
<h3 id="org37ddd60">Writing</h3>
<div class="outline-text-3" id="text-org37ddd60">
<p>
Jacob has spent some time this week for the report, notably the theory chapter
which now has descriptions of Noise, L-systems, Search-based PCG and Voronoi
diagrams.
</p>
</div>
</div>

<div id="outline-container-org4e5769f" class="outline-3">
<h3 id="org4e5769f">Development</h3>
<div class="outline-text-3" id="text-org4e5769f">
<p>
Most generators have received updates to allow them to project their results
onto the terrain now, such as the ParkGenerator which will project the paths in
the park up to the terrain, similar to what the roads do.
</p>
</div>

<div id="outline-container-org297bd02" class="outline-4">
<h4 id="org297bd02">Buildings</h4>
<div class="outline-text-4" id="text-org297bd02">
<p>
Building and block generation has gotten a lot of improvements.
Alexander implemented block and plot type classification based on the size of
the block / plot, which lets us give the blocks / plots more variety in the
city.
Jacob added a skyscraper generator which is generated inside skyscraper plots
which are randomly assigned from the plot generator.
</p>

<p>
Theodor has started creating what will be the final structure of the
BuildingGenerator, which includes the ability to generate any type of building
with different kinds of rules and will give the city much more variety when
it comes to buildings. See Figure <a href="#org5dc5662">4</a> and <a href="#orgc126b85">3</a>.
</p>

<div class="columns-align-end columns">
<div class="column">

<div id="orgc126b85" class="figure">
<p><img src="./images/week11/building_l_systems_wireframe.png" alt="building_l_systems_wireframe.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Wall generation using L-Systems in wireframe.</p>
</div>

</div>

<div class="column">

<div id="org5dc5662" class="figure">
<p><img src="./images/week11/building_l_systems.png" alt="building_l_systems.png" />
</p>
<p><span class="figure-number">Figure 4: </span>Wall generation using L-Systems.</p>
</div>

</div>

</div>
</div>
</div>

<div id="outline-container-org6e4371e" class="outline-4">
<h4 id="org6e4371e">GUI</h4>
<div class="outline-text-4" id="text-org6e4371e">
<p>
Marcus has finished the terrain options: terrain offset and sea level sliders.
The sea level of the world can be adjusted with the sliders and the user can
also navigate along the terrain by adjusting the terrain offset speed slider.
See Figure <a href="#org1bc5756">5</a>.
</p>

<div class="w-responsive">

<div id="org1bc5756" class="figure">
<p><img src="./images/week11/terrain_sealevel.gif" alt="terrain_sealevel.gif" />
</p>
<p><span class="figure-number">Figure 5: </span>Terrain options in GUI.</p>
</div>

</div>

<p>
Alexander worked with improving generation in the UI, like separating the road
and street generation so that the user can re-generate the roads or streets
individually if the results does not satisfy their needs.
</p>
</div>
</div>

<div id="outline-container-orgf31f455" class="outline-4">
<h4 id="orgf31f455">Road and park path mesh</h4>
<div class="outline-text-4" id="text-orgf31f455">
<p>
Anton has also been making improvements on the generated road network mesh. This
includes resolving bugs for specific intersections cases that caused the
intersections and roads to stretch and occupy the whole world. Furthermore, the
same problem was solved for a bug where duplicate identical roads were being
instantiated. The roads also try to project onto the terrain, which is still a
work in progress as some segements of the roads appear underneath the terrain
which needs to be resolved next week. Figures <a href="#org7dff2e6">6</a> and
<a href="#org6971163">7</a> demonstrates Anton&rsquo;s progress this week.
</p>


<div class="columns-align-end columns">
<div class="column">

<div id="org7dff2e6" class="figure">
<p><img src="./images/week11/road_mesh_intersection.png" alt="road_mesh_intersection.png" />
</p>
<p><span class="figure-number">Figure 6: </span>Road intersection mesh.</p>
</div>

</div>

<div class="column">

<div id="org6971163" class="figure">
<p><img src="./images/week11/road_mesh_terrain.png" alt="road_mesh_terrain.png" />
</p>
<p><span class="figure-number">Figure 7: </span>Road mesh projected on the terrain.</p>
</div>

</div>

</div>

<p>
In addition to that, Viktor and Anton adapted and generalized the road mesh to
be used for parks as well since the previous method of creating roads were
dependent on the Unity editor, for the built-in terrain. The new parks are
working well in the current city block system, as can be seen in Figure
<a href="#orgdeb0b3e">8</a>.
</p>

<div class="w-responsive">

<div id="orgdeb0b3e" class="figure">
<p><img src="./images/week11/city_buildings_parks.png" alt="city_buildings_parks.png" />
</p>
<p><span class="figure-number">Figure 8: </span>Buildings and parks so far in the city.</p>
</div>

</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org9765eba" class="outline-2">
<h2 id="org9765eba">Week 10</h2>
<div class="outline-text-2" id="text-org9765eba">
<div class="notice-warning notice">
<p>
This section is a work in progress
</p>

</div>

<p>
In this week, Marcus has worked on the UI for the terrain generator, adding sea
level, x offset and z offset as modifiable options.
A lot of PRs were reviewed/merged such as Mesh Terrain, Noise module, plots and
buildings.
</p>

<p>
We also started on the final report and wrote about noise in the Theory chapter.
</p>

<p>
Viktor spent this week adding the Park Generator to the World Generator and doing a
little bit of report writing.
</p>

<p>
This week Anton spent on reworking the generated road meshes
(simplifying by removing crosssection, only road width and sidewalk now) and
tweaking the intersections to a way that more similarily resembled CityEngine&rsquo;s
intersections(WIP).
</p>
</div>

<div id="outline-container-orgca01a72" class="outline-3">
<h3 id="orgca01a72">Decisions</h3>
<div class="outline-text-3" id="text-orgca01a72">
<div class="decisions">
<ul class="org-ul">
<li>We started having meetings online rather than in person, because of COVID-19.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org6639537" class="outline-3">
<h3 id="org6639537">Writing</h3>
<div class="outline-text-3" id="text-org6639537">
<p>
The group has started working on the final report and has written about noise in
the theory chapter so far.
The plan is that the next upcoming weeks should be a mix of writing on the
report, as well as implementing more features and bugfixes in the application.
</p>
</div>
</div>

<div id="outline-container-orgfc60caa" class="outline-3">
<h3 id="orgfc60caa">Development</h3>
<div class="outline-text-3" id="text-orgfc60caa">
</div>
<div id="outline-container-org19df410" class="outline-4">
<h4 id="org19df410">Plot</h4>
<div class="outline-text-4" id="text-org19df410">
<p>
The city sometimes create very large blocks, so the purpose of the plot
generator is subdividing these blocks into smaller, more manageable blocks.
This feature is not partly implemented, as can be seen in Figure
<a href="#orgf5ee33d">9</a>, however, one issue we noticed is that it only
subdivides smaller blocks into two rather than big blocks into multiple
(depending on how many fit).
This issue is to be addressed at a later stage because we want to focus on the
other generators.
</p>

<div class="w-responsive">

<div id="orgf5ee33d" class="figure">
<p><img src="./images/week10/plot_generator.png" alt="plot_generator.png" />
</p>
<p><span class="figure-number">Figure 9: </span>Basic building generation with incorrect normals.</p>
</div>

</div>
</div>
</div>

<div id="outline-container-orga4de828" class="outline-4">
<h4 id="orga4de828">Buildings</h4>
<div class="outline-text-4" id="text-orga4de828">
<p>
The building generation has gotten a few implementations this week, and it is
currently able to extrude the plots in the city to form very basic buildings.
In Figure <a href="#org5971aa1">10</a>, there are basic building meshes in
place, however note that the normal vectors of the vertices are not correctly
calculated because vertices are shared between walls, something that it should
not be doing.
This was fixed during the last few days of the weeks and can be seen in Figure
<a href="#org8ea1260">11</a>.
</p>

<div class="w-responsive">

<div id="org5971aa1" class="figure">
<p><img src="./images/week10/building_generator.png" alt="building_generator.png" />
</p>
<p><span class="figure-number">Figure 10: </span>Basic building generation with incorrect normals.</p>
</div>

</div>
</div>
</div>

<div id="outline-container-orge9e8625" class="outline-4">
<h4 id="orge9e8625">Roads</h4>
<div class="outline-text-4" id="text-orge9e8625">
<p>
The road generator was working pretty well at this point, but it was by far
finished.
One problem was that Agents could still step into water and traverse steep
slopes, something that is not very realistic in real life.
Alexander spent parts of this week fixing these issues by implementing terrain
normal approximations to the noise generator, allowing the Agents to detect the
slope of the ground.
Agent now also avoid stepping into water by checking the elevation and comparing
it to the sea level. Both of these fixes are demonstrated in Figure
<a href="#org8ea1260">11</a> and <a href="#orga014a7a">12</a>.
</p>

<div class="columns-align-end columns">
<div class="column">

<div id="org8ea1260" class="figure">
<p><img src="./images/week10/agent_water_check.png" alt="agent_water_check.png" />
</p>
<p><span class="figure-number">Figure 11: </span>Agents avoiding stepping into water.</p>
</div>

</div>

<div class="column">

<div id="orga014a7a" class="figure">
<p><img src="./images/week10/agent_slope_check.png" alt="agent_slope_check.png" />
</p>
<p><span class="figure-number">Figure 12: </span>Agents avoiding steep slopes.</p>
</div>

</div>

</div>
</div>
</div>

<div id="outline-container-org6fb0c5c" class="outline-4">
<h4 id="org6fb0c5c">Road mesh</h4>
<div class="outline-text-4" id="text-org6fb0c5c">
<p>
Anton has managed to create a first prototype of the road mesh.
The first iteration of the road mesh involves creating roads between nodes, and
ignoring intersections and advanced sidewalks for now.
These will be implemented in the upcoming weeks, however, there is a good
foundation to build upon currently, as can be seen in Figure <a href="#org7dff2e6">6</a>.
</p>

<div class="w-responsive">

<div id="org0ec0799" class="figure">
<p><img src="./images/week10/road_mesh_intersection.png" alt="road_mesh_intersection.png" />
</p>
<p><span class="figure-number">Figure 13: </span>Road mesh and start of intersections</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org598eea6" class="outline-4">
<h4 id="org598eea6">Building generator</h4>
</div>
</div>
</div>

<div id="outline-container-org14dc104" class="outline-2">
<h2 id="org14dc104">Week 9</h2>
<div class="outline-text-2" id="text-org14dc104">
<p>
This week was the examination week, and as such, we decided that only the
members that felt that they could justify spending time on the project would do
so.
However, in the end, no one had time to work on anything and preferred to study
for their exams.
</p>
</div>
</div>

<div id="outline-container-orgb01ce3c" class="outline-2">
<h2 id="orgb01ce3c">Week 8</h2>
<div class="outline-text-2" id="text-orgb01ce3c">
<div class="notice-warning notice">
<p>
This section is work in progress!
</p>

</div>
</div>

<div id="outline-container-orge38b0ed" class="outline-3">
<h3 id="orge38b0ed">Decisions</h3>
<div class="outline-text-3" id="text-orge38b0ed">
<div class="decisions">
<ul class="org-ul">
<li>glTF export should be used instead of FBX</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org7ec33d7" class="outline-3">
<h3 id="org7ec33d7">Development</h3>
<div class="outline-text-3" id="text-org7ec33d7">
<p>
This week consisted of a lot of individual work to get the generators working on
their own.
Since we had trouble exporting the model, which was a main goal of the project,
Jacob continued to work on the glTF exporter.
However, since the terrain still depended on the UnityEditor package because of
the dynamic mesh that we were using, this week he mainly focused on finding
alternative solutions to the terrain.
</p>

<p>
So, with the addition of Alexander&rsquo;s work on the generalized Noise component,
Jacob integrated the new noise into the terrain generator.
The dynamic mesh can be converted to a regular mesh that the exporter would work
with, but that also requires the UnityEditor package.
So the only alternative is creating the mesh entirely on our own, which is not
really a problem since it is a pretty trivial task.
However, a lot of more complex features that the dynamic mesh offers would
obviously not be supported in the new terrain mesh, but that is a compromise we
need to take to achieve our exporting goal
The new mesh resulted in a very reliable export feature that supported
everything that was required in the project.
</p>

<p>
The application needed a way for the user to move around, so Marcus worked on
implementing a camera movement script.
</p>
</div>

<div id="outline-container-org0b646fb" class="outline-4">
<h4 id="org0b646fb">Roads</h4>
<div class="outline-text-4" id="text-org0b646fb">
<p>
Using the Noise component that Alexander developed, he implemented it into the
road generator by creating a highway strategy.
The point of this strategy was simply have the roads react according to the
population map, which used the Noise component.
By guiding the highways towards higher population dense areas, the road network
tended to connect to other cities, which was a nice side-effect.
</p>
</div>
</div>

<div id="outline-container-org6ab507e" class="outline-4">
<h4 id="org6ab507e">Road mesh</h4>
<div class="outline-text-4" id="text-org6ab507e">
<p>
Anton has been working hard with the road generator mesh and getting it to work
with the road network.
However there is still no intersection mesh ready and we hope it will be
finished next week.
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-orga32898e" class="outline-2">
<h2 id="orga32898e">Week 7</h2>
<div class="outline-text-2" id="text-orga32898e">
<div class="notice-warning notice">
<p>
This section is work in progress!
</p>

</div>

<p>
During this week, Anton and Viktor held the halftime presentation, and the rest
of the group members were there to see other group presentations.
</p>

<p>
It was pretty interesting to see which projects the other groups had, as well as
seeing and comparing what the group that has the same project as us had
accomplished.
Something that was also interesting was that while our early focus involved the
road generation, since we deemed that to be the most complex to get right, the
other group focused on the terrain generator.
</p>
</div>

<div id="outline-container-org4a4276c" class="outline-3">
<h3 id="org4a4276c">Decisions</h3>
<div class="outline-text-3" id="text-org4a4276c">
<div class="decisions">
<ul class="org-ul">
<li>Next iteration should consist of the following subjects:
<ul class="org-ul">
<li>Terrain texture splatting</li>
<li>Terrain lakes/oceans</li>
<li>Proper interaction between terrain and road generation</li>
<li>Generalize the Perlin noise module</li>
<li>Couple road mesh generation with road network</li>
<li>Block generation (polygon extration and insetting)</li>
<li>Assembly definitions</li>
<li>CityPCG namespace</li>
<li>Investigate alternatives to FBX export in compiled binary</li>
<li>Plot generation</li>
<li>Building generation (L-Systems?)</li>
</ul></li>
</ul>

</div>
</div>
</div>

<div id="outline-container-orgd9fb453" class="outline-3">
<h3 id="orgd9fb453">Development</h3>
<div class="outline-text-3" id="text-orgd9fb453">
</div>
<div id="outline-container-orgeb54043" class="outline-4">
<h4 id="orgeb54043">Terrain</h4>
<div class="outline-text-4" id="text-orgeb54043">
<p>
The terrain needed water, so Marcus implemented this into the application.
The sea level can be adjusted to a specific height, which would later be
implemented into the user interface, but for now is adjusted in the Unity
Editor inspector. See Figure <a href="#orgf0572ca">14</a>.
</p>

<div class="w-responsive">

<div id="orgf0572ca" class="figure">
<p><img src="./images/week7/terrain_sealevel.gif" alt="terrain_sealevel.gif" />
</p>
<p><span class="figure-number">Figure 14: </span>Terrain sea level</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org6642907" class="outline-4">
<h4 id="org6642907">Roads</h4>
<div class="outline-text-4" id="text-org6642907">
<p>
The first iteration of the road spline was finally created by Anton this week.
Figure <a href="#org8e2403b">15</a> shows the first spline interpolated between several
nodes in a smooth manner.
</p>

<div class="w-responsive">

<div id="org8e2403b" class="figure">
<p><img src="./images/week7/road_spline.gif" alt="road_spline.gif" />
</p>
<p><span class="figure-number">Figure 15: </span>The road spline interpolated using Bezier splines</p>
</div>

</div>

<p>
It was time to couple the spline and road mesh logic with the rest of the road
generator, which is exactly what Anton spent this week doing.
In order to generate the road mesh, the entire road network needed to be
traversed in such a way that duplicate roads were not created.
Another requirement that Anton and Alexander focused on with this was that roads
that did not have any intersections would only be one spline, rather than having
a spline for every connection.
So, after many implementations, Alexander and Anton managed to get a working
road network traverser which created simple boxes on every road connection,
which is demonstrated in <a href="#orga63eb6a">16</a>.
</p>

<div class="w-responsive">

<div id="orga63eb6a" class="figure">
<p><img src="./images/week7/road_mesh_traverser.gif" alt="road_mesh_traverser.gif" />
</p>
<p><span class="figure-number">Figure 16: </span>The road mesh generator traversing the network, finding all connected roads.</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org2c196a5" class="outline-4">
<h4 id="org2c196a5">Blocks</h4>
<div class="outline-text-4" id="text-org2c196a5">
<p>
Alexander developed the block inset functionality which was required to make
sure roads did not intersect with buildings.
The function was then applied to all blocks in the entire city, shown in Figure
<a href="#org8cf3dfe">17</a>.
At first, we were worried that the block generator would be a relatively slow
process, but that was not the case after testing.
Insetting arbitrary polygons is a very expensive process if done correctly,
since it requires a so called Straight Skeleton (<a href="https://en.wikipedia.org/wiki/Straight_skeleton">Straight Skeleton on
Wikipedia</a>).
However, this algorithm is very advanced and way beyond the scope of this
project to implement, so the group decided to use the Clipper library, which
handles insetting relatively well and is quite optimized as well.
</p>

<div class="w-responsive">

<div id="org8cf3dfe" class="figure">
<p><img src="./images/week7/block_inset_city2.png" alt="block_inset_city2.png" />
</p>
<p><span class="figure-number">Figure 17: </span>Block inset function</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org4c35b4c" class="outline-4">
<h4 id="org4c35b4c">Parks</h4>
<div class="outline-text-4" id="text-org4c35b4c">
<p>
Anton and Viktor worked on the park generator, getting the park paths to work
with the terrain.
In Figure <a href="#org455f99a">18</a> and Figure <a href="#org869dafe">19</a>, the
paths are using some features found in the dynamic mesh.
Since the plan is to get rid of the dynamic mesh, this needs to be changed to
work with the new terrain mesh.
</p>

<p>
Anton and Viktor discussed how this would work, and ended up waiting for the
road mesh to work with the terrain.
The idea was that once the road mesh work, they might be able to apply it to the
park paths as well, which is exactly what they ended up doing in the next couple
of weeks.
</p>

<div class="columns">
<div class="column">

<div id="org455f99a" class="figure">
<p><img src="./images/week7/park_generator.png" alt="park_generator.png" />
</p>
<p><span class="figure-number">Figure 18: </span>Park generator</p>
</div>

</div>
<div class="column">

<div id="org869dafe" class="figure">
<p><img src="./images/week7/park_generator2.png" alt="park_generator2.png" />
</p>
<p><span class="figure-number">Figure 19: </span>Park generator seen from above</p>
</div>

</div>

</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org654626b" class="outline-2">
<h2 id="org654626b">Week 6</h2>
<div class="outline-text-2" id="text-org654626b">
<div class="notice-warning notice">
<p>
This section is work in progress!
</p>

</div>

<p>
In this week everyone kept working on the generators from last week and
improving them. Viktor and Anton also spent time on preparing the half-time
presentation.  The progress in output from the generators will be provided as
images, and more detailed descriptions of how the work progress looked like will
be given in the individual week-logs.
</p>

<p>
Although a very rough draft of it the road
generation logic from Anton and Alexander has started to be merged together. The
park generator is currently in hiatus as Viktor and Theodor work together on
implementing a polygon divider. We have working CI builds and linters now.
</p>

<p>
As per previous week decisions regarding this iteration, everyone spent this
time working on their own generator tasks. The progress that was made during
this week will be listed in the respective sections below.
</p>

<p>
Currently we lack a plot and block generator, but they are on their way. First,
the basic logic for creating blocks and plots needs to be implemented before a
generator can be created for it. Jacob, Theodor and Viktor is working on this.
A parking generator is also missing, which is something we want to implement,
however it is not included in the scope of this iteration.
</p>

<p>
The half time presentation would be held next week, so Anton and Viktor spent
time preparing for it. It consisted of our goals and current progress of the
project.
</p>
</div>

<div id="outline-container-orgbbfd101" class="outline-3">
<h3 id="orgbbfd101">Development</h3>
<div class="outline-text-3" id="text-orgbbfd101">
</div>
<div id="outline-container-org66ad861" class="outline-4">
<h4 id="org66ad861">CI &amp; Linters</h4>
<div class="outline-text-4" id="text-org66ad861">
<p>
Jacob has managed to set up a working CI for compiling the project using Github
actions, as well as a linter than will make sure every part of the project code
has the same code style, for the sake of consistency.
Right now, the linter is difficult to set up on a Windows machine, so it is
mostly Jacob running the linter on the pull requests, or someone that has a
Linux environment.
</p>
</div>
</div>

<div id="outline-container-orgf3308ca" class="outline-4">
<h4 id="orgf3308ca">Terrain</h4>
<div class="outline-text-4" id="text-orgf3308ca">
<p>
The terrain generator is now no longer implementing its own noise generation,
since there is now a standalone noise generator component that can be used with
any other generator easily. It supports specifing multiple layers with different
frequencies, magnitude and exponential factors, which gives us the ability to
fine tune and adjust any generator with great flexibility.
</p>

<p>
The terrain is currenly hooked up to this noise generator and one result of this
can be seen in Figure <a href="#orgb0d1710">20</a>. The example in the figure
does not have a layer for adding great detail, and is mostly configured for
generating a rough terrain shape. One can add such a layer to give the result a
more realistic and detailed look, but it would also require a higher terrain
mesh resolution.
</p>

<div class="w-responsive">

<div id="orgb0d1710" class="figure">
<p><img src="./images/week6/terrain_noise.gif" alt="terrain_noise.gif" />
</p>
<p><span class="figure-number">Figure 20: </span>Terrain generator using the new noise generator component (GIF).</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org429f941" class="outline-4">
<h4 id="org429f941">Road generation</h4>
<div class="outline-text-4" id="text-org429f941">
<p>
A lot of progress has been made on the road mesh generation and it has started
getting merged together with the road network. There are still a lot of issues
and missing pieces, but Anton and Alexander has worked together to try and solve
this.
</p>

<p>
Alexander has created an Agent strategy for generating streets now, as can be
seen in figure <a href="#org1e5e844">21</a>. This is an improved version of what was
used in the prototype, and the roads generated from this strategy are marked as
streets rather than regular roads. This is useful for the road mesh to identify
what is a main road and what is a street.
</p>

<div class="w-responsive">

<div id="org1e5e844" class="figure">
<p><img src="./images/week6/unity_road_gen.gif" alt="unity_road_gen.gif" />
</p>
<p><span class="figure-number">Figure 21: </span>Street strategy branching off from main roads. (GIF)</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org2e56f61" class="outline-4">
<h4 id="org2e56f61">Parks</h4>
<div class="outline-text-4" id="text-org2e56f61">
<p>
We dumped the old low-poly trees since we going for a more realistic aesthetics,
so Viktor started using an asset called <a href="https://assetstore.unity.com/packages/3d/vegetation/trees/realistic-tree-9-rainbow-tree-54622">&ldquo;Realistic Tree 9 [Rainbow Tree]&rdquo;</a> on the
Unity Asset Store that creates procedurally generated trees.
</p>

<p>
He also added a restriction to trees by giving each tree a radius that blocks
other trees from generating in close proximity (see figure
<a href="#orgd0f241b">22</a>).
</p>

<div class="w-responsive">

<div id="orgd0f241b" class="figure">
<p><img src="./images/week6/park_tree_radius.png" alt="park_tree_radius.png" />
</p>
<p><span class="figure-number">Figure 22: </span>Procedurally generated trees and tree radius</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org92d25ad" class="outline-4">
<h4 id="org92d25ad">Plot generation</h4>
<div class="outline-text-4" id="text-org92d25ad">
<div class="columns">
<div class="column">
<p>
Viktor took a break with the park generator to help Theodor with a polygon
splitter library. This was required to start implementing a plot generator,
which main goal is taking polygons and splitting it into multiple plots.
See Figure <a href="#org2507bd2">23</a>.
</p>

</div>
<div class="column">

<div id="org2507bd2" class="figure">
<p><img src="./images/week6/polygon_splitting.png" alt="polygon_splitting.png" />
</p>
<p><span class="figure-number">Figure 23: </span>Basic polygon splitter in action</p>
</div>

</div>

</div>

<p>
The reason this is necessary is because the road network sometimes results in
very large blocks, and a solution for that is to split it into multiple plots.
This would also result the appearance of more variation since each plot could
have a different type of building or building height, for example.
</p>
</div>
</div>
</div>

<div id="outline-container-orgdb0ca7c" class="outline-3">
<h3 id="orgdb0ca7c">Problems and concerns</h3>
<div class="outline-text-3" id="text-orgdb0ca7c">
<p>
The current FBX exporter is still depending on the Unity Editor. This is a major
concern and currently blocks us from our goal of having a standalone binary. We
need to look into alternatives or else we have to change our goals and explain
why it would not work. Jacob is searching for other ways at the moment and
hopefully has a solution next week.
</p>
</div>
</div>
</div>

<div id="outline-container-org45581e5" class="outline-2">
<h2 id="org45581e5">Week 5</h2>
<div class="outline-text-2" id="text-org45581e5">
<div class="notice-warning notice">
<p>
This section is work in progress!
</p>

</div>

<p>
Most of the group members spent this week working on their own parts of the
application, mostly getting each generator to do what it should. We also got a
basic GUI in place that lets the user run the generators in the pipelined
version of the application. However, it is not hooked up to much at this point,
and the generators do not take any inputs from the world generator at the
moment.
</p>
</div>

<div id="outline-container-orgc159620" class="outline-3">
<h3 id="orgc159620">Decisions</h3>
<div class="outline-text-3" id="text-orgc159620">
<div class="decisions">
<ul class="org-ul">
<li>The first iteration will be 2 weeks, and will consist of programming and
preparations for the presentation.
The first week will focus on programming while the second week will focus on
evaluating what needs to be included in the presentation.</li>
<li>The first iteration is divided into the following workload:
<ol class="org-ol">
<li>Anton + Alexander: Road and population map generation</li>
<li>Theodor + Viktor: Plot and building generation</li>
<li>Marcus: Terrain generation</li>
<li>General application functionality, block generation and possibly some CI.</li>
</ol></li>
<li>The aim of this iteration will be to develop a fully working pipeline, but the
quality of each generator independently is not important.</li>
<li>We decided to not use Travis CI.</li>
<li>Unity version 2019.3.1f1 will be used by all group members.</li>
<li>A parking generator should be developed in the future.</li>
<li>An R-Tree will be investigated for road intersections rather than a quadtree.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org34aa943" class="outline-3">
<h3 id="org34aa943">Development</h3>
<div class="outline-text-3" id="text-org34aa943">
</div>
<div id="outline-container-org799b02a" class="outline-4">
<h4 id="org799b02a">Roads</h4>
<div class="outline-text-4" id="text-org799b02a">
<p>
The road intersection logic that was created in the prototype had issues, so it
was necessary to set up a dedicated testing environment for all possible cases
that can occurr. So in Unity, Alexander created a playground that lets you put
down nodes with your mouse, which can be seen in Figure
<a href="#orga9b6f6e">24</a>, which also demonstrates the RTree used in action.
The previous prototype were using a Quadtree which resulted in far worse
performance than an RTree.
</p>

<p>
The reason an RTree was used was that it supports bounding boxes very well,
which is not the case for a KD-Tree or a spatial grid. Quadtrees have too much
depth which means more iterations while searching for elements.
More about RTrees can be read <a href="https://en.wikipedia.org/wiki/R-tree">here</a>.
</p>

<p>
This meant we could create a good connection algorithm that would take into
account intersections, snapping and nearby placement easily, something that we
could depend on working in the final generation.
</p>

<p>
Finally, when the intersection was working like we wanted to, it was time to put
it to the test, so we hooked it into the Agent generator and it worked pretty
seamlessly. The results can be seen in Figure <a href="#org2717e28">25</a>.
Of course, there is always bound to be bugs, which we discovered during a later
stage in development.
</p>

<div class="columns-align-end columns">
<div class="column">

<div id="orga9b6f6e" class="figure">
<p><img src="./images/week5/intersection_test.png" alt="intersection_test.png" />
</p>
<p><span class="figure-number">Figure 24: </span>Road intersection testing</p>
</div>

</div>
<div class="column">

<div id="org2717e28" class="figure">
<p><img src="./images/week5/paris_generation.png" alt="paris_generation.png" />
</p>
<p><span class="figure-number">Figure 25: </span>Road intersection testing</p>
</div>

</div>

</div>
</div>
</div>

<div id="outline-container-orgbf1c168" class="outline-4">
<h4 id="orgbf1c168">Road mesh and Splines</h4>
<div class="outline-text-4" id="text-orgbf1c168">
<p>
When it comes to the road mesh, we needed it to be smooth enough to not see the
rough imperfections of the road network. So we resorted to a simple curbic
Bezier curve, which works by interpolating values between two positions and two
control points. The basic road mesh that resulted from this is seen in Figure
<a href="#orgcaefd17">26</a>.
</p>

<div class="w-responsive">

<div id="orgcaefd17" class="figure">
<p><img src="./images/week5/mesh_spline.png" alt="mesh_spline.png" />
</p>
<p><span class="figure-number">Figure 26: </span>Basic road mesh using a cubic Bezier curve.</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org28d0d47" class="outline-4">
<h4 id="org28d0d47">Terrain</h4>
<div class="outline-text-4" id="text-org28d0d47">
<p>
The first iteration of the terrain using Unity&rsquo;s built in terrain functionality
was completed, but there were no textures yet. It was a simple green dynamic
terrain that had a perlin noise attached to it, which can be seen in Figure
<a href="#orgd15c3a5">27</a>.
</p>

<div class="w-responsive">

<div id="orgd15c3a5" class="figure">
<p><img src="./images/week5/unity_terrain.png" alt="unity_terrain.png" />
</p>
<p><span class="figure-number">Figure 27: </span>Basic terrain dynamically created using built in Unity functionality</p>
</div>

</div>
</div>
</div>

<div id="outline-container-org780525e" class="outline-4">
<h4 id="org780525e">Parks</h4>
<div class="outline-text-4" id="text-org780525e">
<p>
When it came to parks, we did not really mind what the final results would look
like at this stage, all we wanted was to generate trees and foliage inside a
polygon. We played around quite a bit with this, finding ways to connect a
Perlin noise to the results and instead of generating a park we ended up
generating a pretty neat looking forest. Take a look at Figure <a href="#org90ed292">28</a>.
</p>

<div class="w-responsive">

<div id="org90ed292" class="figure">
<p><img src="./images/week5/forest.png" alt="forest.png" />
</p>
<p><span class="figure-number">Figure 28: </span>Park generator generating a&#x2026; forest?</p>
</div>

</div>

<p>
At this stage, we were using low poly trees found for free on the Unity Asset
store, but we switched this out at a later stage for more realistic trees.
Still, it generated a pretty nice low-poly forest!
</p>
</div>
</div>
</div>

<div id="outline-container-org3a4f5e4" class="outline-3">
<h3 id="org3a4f5e4">Problems</h3>
<div class="outline-text-3" id="text-org3a4f5e4">
</div>
<div id="outline-container-org921c634" class="outline-4">
<h4 id="org921c634">Export</h4>
<div class="outline-text-4" id="text-org921c634">
<p>
One feature that is necessary to get working early on, in order to save
ourselves from trouble in the future is export functionality. So, Jacob has
attempted to get FBX export to work in runtime. The problem is that the built in
FBX exporter depends on Unity Editor code, but the goal is that our application
should work compiled, without any editor dependencies.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org4dd44a9" class="outline-2">
<h2 id="org4dd44a9">Week 4</h2>
<div class="outline-text-2" id="text-org4dd44a9">
<div class="notice-warning notice">
<p>
This section is work in progress!
</p>

</div>

<p>
Since the deadline for the project plan was coming up, this week was dedicated
to writing the content of the project plan. Most of the time went to this, but there
were development in the prototypes and method ideas that we brought up from past
weeks.
</p>

<p>
In general, most sections of the report was rewritten by members that were not
originally assigned to the section, in order to increase consistency.
Everyone in the group made an effort to make sure that each of the chapters were
well-written and together made up one coherent text.
</p>
</div>

<div id="outline-container-orgeec2bf6" class="outline-3">
<h3 id="orgeec2bf6">Decisions</h3>
<div class="outline-text-3" id="text-orgeec2bf6">
<div class="decisions">
<ul class="org-ul">
<li>We decided to not pursue the Wave Function Collapse type of procedural
generation for roads.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org0b6fbfc" class="outline-3">
<h3 id="org0b6fbfc">Meeting, writing and assignments</h3>
<div class="outline-text-3" id="text-org0b6fbfc">
<p>
Another meeting with Staffan resulted in very constructive feedback regarding
our current project plan up to this week.
</p>

<p>
We decided we wanted to find some tools for spell-checking and grammar-checking,
so we tried a few different tools. Grammarly turned out to be the most useful
one because it helped us phrase our sentences more consistently and more
&ldquo;scientific&rdquo;, basically giving our report more credibility.
</p>

<p>
Another tool we investigated is textidote, which is a tool for LaTeX for
spelling, grammar and general LaTeX syntax checking. We mostly used this for the
syntax, since grammarly did a much better job at spelling and grammar.
</p>

<p>
By this time, most of us had finished and passed the Chalmers Library Education
Online assignment which consisted of a variety of writing technique questions,
such as how to reference sources properly, evaluating source credibility and
more.
</p>
</div>
</div>

<div id="outline-container-org89b17ae" class="outline-3">
<h3 id="org89b17ae">Discussion and decisions</h3>
<div class="outline-text-3" id="text-org89b17ae">
<p>
This week we discussed more methods and algorithms that are commonly used in
procedurally generated content. Wave Function Collapse came up as a possible
algorithm instead of the current road generation algorithm, but we decided to
not pursue it given that the Agent-based generator would give suitable results.
</p>

<p>
Some of the eventual problems that could pose an issue for our project if we
were to use Wave Function Collapse is that our city is not really
two-dimensional, but that could be avoided. The biggest issue is that from what
we found during our research of Wave Function Collapse is that it often results
in rectangular results, but we did not want that type of consistency in our city
which is why we decided to stick with our current Agent-based method.
</p>

<p>
We also talked about machine learning and Search-based AI, but we realized that
there is not really a clear definition of how &ldquo;good&rdquo; a road is, and that is
needed for the AI to be taught. One could potentially input real world data
which would teach the AI to generate similar cities, however, none of us were
very experienced in the machine learning field and thus we decided to skip this.
</p>
</div>
</div>
</div>

<div id="outline-container-org2798c74" class="outline-2">
<h2 id="org2798c74">Week 3</h2>
<div class="outline-text-2" id="text-org2798c74">
</div>
<div id="outline-container-org564b768" class="outline-3">
<h3 id="org564b768">Decisions</h3>
<div class="outline-text-3" id="text-org564b768">
<div class="decisions">
<ul class="org-ul">
<li>The Agent-based method for road generation is the one we are going to use.</li>
<li>A summary of the current week progress should be written during every Friday&rsquo;s
workshop at 16:00.</li>
<li>Alexander is responsible for the communication between the other project
group that has the same project as our group.</li>
<li>Anton is responsible for the communication between our group and the
supervisor which means he is responsible for sending and responding to mail
with the supervisor.</li>
<li>We decided we do not need any strict rules for taking breaks during workshops,
in regards to if that pause should be logged (acceptable within reasonable
durations).</li>
<li>Unity and C# will be used for the project</li>
<li>We limit ourself to only generating modern cities.</li>
<li>Some LaTeX writing style preferences were decided upon for consistency within
the group.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org1397f76" class="outline-3">
<h3 id="org1397f76">Tools</h3>
<div class="outline-text-3" id="text-org1397f76">
<p>
Unity and C# are by far the easiest tools to use for our project, and it suits
our needs completely. Some of us are already familiar with Unity and C#.
Everything that the project needs (and more) is offered within Unity, as well as
very powerful debugging and profiling tools. Lots of features that we want to
implement can easily be done with Unity compared to other tools available.
</p>

<p>
Some alternatives that were researched up to this week is C++ Raylib, Java
LWGJL, Java jMonkeyEngine, but these were ruled out mostly because it lacked
most of the tools that we would need which Unity already had.
Choosing one of those alternatives would mean we would have to reimplement a lot
of basic functionality that would only postpone actual development of the
project.
</p>
</div>
</div>

<div id="outline-container-org254fea9" class="outline-3">
<h3 id="org254fea9">Report, Project plan and Terminology</h3>
<div class="outline-text-3" id="text-org254fea9">
<p>
For the most part, this week was spent writing the project plan and the first
draft was quickly completed in order to get feedback from the supervisor.
</p>

<p>
Something that we quickly realized would be important for writing the project
plan and report was terminology.
Even within our group, we realized there were inconsistency in the meaning of
words and that meant that we had to define these very strictly in the report in
order to avoid confusion for the reader. We spent a while defining these and
they can be found in the project plan / report.
</p>
</div>
</div>

<div id="outline-container-org6d836ac" class="outline-3">
<h3 id="org6d836ac">Development</h3>
<div class="outline-text-3" id="text-org6d836ac">
<p>
The first method of road generation turned out to be best suited for our
project, but the second method will be considered for plot generation in the
future.
A lot of progress was made on making the road generation as flexible as
possible, as well as tuning the results for better results.
</p>

<p>
The road generator now lets each agent to have its own strategy for generation
which they will follow. One example of a road strategy that is used is the Paris
or Manhattan strategy, which basically means the agents will walk around and
place roads that mimic the structure of these cities.
</p>

<div class="columns-align-end columns">
<div class="column">

<div class="figure">
<p><img src="./images/week3/roadgen.png" alt="roadgen.png" />
</p>
<p><span class="figure-number">Figure 29: </span>Road generation prototype using method 1</p>
</div>

</div>

<div class="column">

<div class="figure">
<p><img src="./images/week3/popmap.png" alt="popmap.png" />
</p>
<p><span class="figure-number">Figure 30: </span>Road generation with population map (dark is high density in this picture)</p>
</div>

</div>

</div>

<p>
For the world generator, we defined a pipeline that the program will follow
which basically means that we have created a design for the algorithm as a
whole.
</p>
</div>
</div>

<div id="outline-container-org76bbb9c" class="outline-3">
<h3 id="org76bbb9c">Overall</h3>
<div class="outline-text-3" id="text-org76bbb9c">
<p>
It was useful to get a lot of work done this early and we quickly got a
perspective of how the city generation would work. Lots of great feedback from
our supervisor resulted in a better writing technique and better results from
the algorithm.
</p>
</div>
</div>
</div>

<div id="outline-container-org56d70aa" class="outline-2">
<h2 id="org56d70aa">Week 2</h2>
<div class="outline-text-2" id="text-org56d70aa">
<p>
This week also had a few lectures, and Alexander also came back from his
vacation so we made sure to get him up to date.
</p>
</div>

<div id="outline-container-org91ea870" class="outline-3">
<h3 id="org91ea870">Decisions</h3>
<div class="outline-text-3" id="text-org91ea870">
<div class="decisions">
<ul class="org-ul">
<li>Theodor is responsible for the meeting agenda but does not have to be
secretary ever.</li>
<li>Jacob is responsible for the administrative decisions documents but does not
have to be secretary ever.</li>
<li>Anton is responsible for booking group rooms for workshops every week.</li>
<li>If a group member is late for a meeting, that group member cannot log the time
that was missed.</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org2b85219" class="outline-3">
<h3 id="org2b85219">Discussion and planning</h3>
<div class="outline-text-3" id="text-org2b85219">
<p>
Lots of subjects were brought up during the workshops this week, such as what
method we wanted to use for different parts in the world generator.
We quickly came up with two methods of generating roads, and because we could
not all agree on one method we decided it was best to create two separate demos
that would demonstrate the method and its pros / cons.
</p>

<p>
The first demo would make use of road building Agents that would be deployed
onto a 2D-plane, and they would place down roads while interacting with the road
network. This would initially be a very basic system that would simply have
Agents walk in straight lines and sometimes branch off into more Agents.
</p>

<p>
The second demo would use a recursive approach where it splits the world into
small cells, and each cell would further be subdivided. The idea was to place
down a lot of points, split the cell into two by creating a line between each
point, and then recursively applying that algorithm into more detail.
</p>

<p>
We decided to postpone selecting which tools to use for our project until next
week, because we wanted to research which tool would suit us best and needed
more ticouldme.
</p>
</div>
</div>
</div>

<div id="outline-container-org78bacc5" class="outline-2">
<h2 id="org78bacc5">Week 1</h2>
<div class="outline-text-2" id="text-org78bacc5">
<p>
This week marks the start of the project, and thus a lot of research and
administrative tasks had to be done, such as decisions regarding tools and
a schedule.
</p>

<p>
Every decision that we make during meetings should be documented, so we decided
to create a group contract and a log book. Initially, the log book were only the
individual&rsquo;s own weekly logs, but we later realized we needed a shared log that
summarized the overall progress of the project, which is the log that you are
reading right now.
</p>
</div>

<div id="outline-container-org4dea43a" class="outline-3">
<h3 id="org4dea43a">Decisions</h3>
<div class="outline-text-3" id="text-org4dea43a">
<div class="decisions">
<ul class="org-ul">
<li>The secretary during the meetings should be rotated according to this order:
<ol class="org-ol">
<li>Marcus Ansamaa</li>
<li>Alexander Arvidsson</li>
<li>Anton Hkansson</li>
<li>Viktor Truv</li>
</ol></li>
<li>The report should be written in LaTeX and it should be written in Swedish
(this decision was later changed to english in a future decision).</li>
<li>Theodor is responsible for booking group rooms for meetings.</li>
</ul>

</div>

<p>
We decided to use Google Calendar for scheduled meetings, and that we should
have two lunch meetings as well as 3 workshops every week. The lunch meetings
usually were an hour long, over lunch, while the workshops were all 4 hours,
placed during Thursday afternoon, Friday morning and Friday afternoon.
The purpose of the workshops is to meet up with the group to sit down and get
work done, while also being able to get help from eachother if need be.
</p>

<p>
For communication, we decided to use Slack as it is the easier
platform which everyone was familiar with, which also gave us a more organized
form of communication than other platforms would offer (for example, Messenger).
</p>

<p>
File sharing and development ended up being Google Drive and Github. All our
documents and resources we collect during the projects lifetime would be placed
in drive for ease of access, while the project code and report is in two
separate Github repositories for version control.
</p>
</div>
</div>

<div id="outline-container-org2141bc7" class="outline-3">
<h3 id="org2141bc7">Meetings and research.</h3>
<div class="outline-text-3" id="text-org2141bc7">
<p>
We got to meet our supervisor, Staffan, during this week which guided us to get a good
start with the project, and we were also able to ask any questions we had before
getting started.
</p>

<p>
Most of us who were available also attended the introductory seminars during
this week.
</p>

<p>
The rest of the time was spent invididually, researching different aspects of
the project to get a deeper understanding of what requirements and
specifications our project would need.
</p>
</div>
</div>
</div>
</div>
</body>
</html>
